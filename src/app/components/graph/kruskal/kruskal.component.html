<div class="kruskal-visualization">
  <div class="problem-info">
    <h4>ğŸŒ³ ã‚¯ãƒ©ã‚¹ã‚«ãƒ«æ³• (æœ€å°å…¨åŸŸæœ¨)</h4>
    <div class="result-summary">{{ getResultText() }}</div>
  </div>

  <!-- ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º -->
  @if (currentEdgeIndex >= 0) {
    <div class="current-step">
      <strong>ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—:</strong> {{ getCurrentEdgeInfo() }}
    </div>
  }

  <div class="main-content">
    <!-- ã‚°ãƒ©ãƒ•è¡¨ç¤º -->
    <div class="graph-section">
      <h4>ğŸ”— ã‚°ãƒ©ãƒ•ã¨æœ€å°å…¨åŸŸæœ¨</h4>
      <svg width="400" height="350" class="graph-svg">
        <!-- ã‚¨ãƒƒã‚¸ã‚’æç”» -->
        @for (edge of graph.edges; track edge) {
          <line
            [attr.x1]="getNodeX(edge.from)"
            [attr.y1]="getNodeY(edge.from)"
            [attr.x2]="getNodeX(edge.to)"
            [attr.y2]="getNodeY(edge.to)"
            [class]="getGraphEdgeClass(edge.from, edge.to)"
          />
          <!-- ã‚¨ãƒƒã‚¸ã®é‡ã¿è¡¨ç¤º -->
          <text
            [attr.x]="getEdgeMidX(edge)"
            [attr.y]="getEdgeMidY(edge)"
            class="edge-weight"
            [class.mst-weight]="mstEdges.has(`${Math.min(edge.from, edge.to)}-${Math.max(edge.from, edge.to)}`)"
            [class.current-weight]="currentEdgeIndex >= 0 && sortedEdges[currentEdgeIndex] && `${Math.min(edge.from, edge.to)}-${Math.max(edge.from, edge.to)}` === `${Math.min(sortedEdges[currentEdgeIndex].from, sortedEdges[currentEdgeIndex].to)}-${Math.max(sortedEdges[currentEdgeIndex].from, sortedEdges[currentEdgeIndex].to)}`">
            {{ edge.weight }}
          </text>
        }

        <!-- ãƒãƒ¼ãƒ‰ã‚’æç”» -->
        @for (node of graph.nodes; track node.id) {
          <g class="node">
            <circle
              [attr.cx]="node.x"
              [attr.cy]="node.y"
              r="20"
              [class]="getNodeClass(node.id)"
            />
            <text
              [attr.x]="node.x"
              [attr.y]="node.y + 5"
              class="node-id"
            >
              {{ node.id }}
            </text>
          </g>
        }
      </svg>
    </div>

    <!-- ã‚¨ãƒƒã‚¸ãƒªã‚¹ãƒˆã¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®é€²è¡Œ -->
    <div class="edges-section">
      <h4>ğŸ“‹ ã‚½ãƒ¼ãƒˆæ¸ˆã¿ã‚¨ãƒƒã‚¸ãƒªã‚¹ãƒˆ</h4>
      <div class="edges-container">
        @for (edge of sortedEdges; track $index) {
          <div class="edge-item" [class]="getEdgeClass(edge, $index)">
            <div class="edge-info">
              <span class="edge-nodes">{{ edge.from }} â†” {{ edge.to }}</span>
              <span class="edge-weight-text">é‡ã¿: {{ edge.weight }}</span>
            </div>
            <div class="edge-status">
              @if ($index === currentEdgeIndex) {
                <span class="status-current">æ¤œè¨ä¸­</span>
              } @else if (mstEdges.has(edge.id)) {
                <span class="status-mst">MSTè¿½åŠ </span>
              } @else if (rejectedEdges.has(edge.id)) {
                <span class="status-rejected">ã‚µã‚¤ã‚¯ãƒ«â†’æ‹’å¦</span>
              } @else if ($index < currentEdgeIndex || isComplete) {
                <span class="status-processed">å‡¦ç†æ¸ˆã¿</span>
              } @else {
                <span class="status-pending">å¾…æ©Ÿä¸­</span>
              }
            </div>
          </div>
        }
      </div>
    </div>
  </div>

  <!-- çµæœçµ±è¨ˆ -->
  @if (isComplete) {
    <div class="result-section">
      <h4>ğŸ“Š æœ€å°å…¨åŸŸæœ¨ã®çµ±è¨ˆ</h4>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label">ç·é‡ã¿</div>
          <div class="stat-value">{{ totalWeight }}</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">MST ã‚¨ãƒƒã‚¸æ•°</div>
          <div class="stat-value">{{ mstEdges.size }}</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">æ‹’å¦ã‚¨ãƒƒã‚¸æ•°</div>
          <div class="stat-value">{{ rejectedEdges.size }}</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </div>
          <div class="stat-value">ã‚¯ãƒ©ã‚¹ã‚«ãƒ«æ³•</div>
        </div>
      </div>
      
      <div class="success-message">
        âœ… æœ€å°å…¨åŸŸæœ¨ãŒå®Œæˆã—ã¾ã—ãŸï¼å…¨ã¦ã®ãƒãƒ¼ãƒ‰ãŒæœ€å°ã‚³ã‚¹ãƒˆã§æ¥ç¶šã•ã‚Œã¦ã„ã¾ã™ã€‚
      </div>
    </div>
  }

  <div class="legend">
    <div class="legend-item">
      <div class="legend-color current"></div>
      <span>ç¾åœ¨æ¤œè¨ä¸­</span>
    </div>
    <div class="legend-item">
      <div class="legend-color mst"></div>
      <span>æœ€å°å…¨åŸŸæœ¨ã®ã‚¨ãƒƒã‚¸</span>
    </div>
    <div class="legend-item">
      <div class="legend-color rejected"></div>
      <span>æ‹’å¦ã•ã‚ŒãŸã‚¨ãƒƒã‚¸</span>
    </div>
    <div class="legend-item">
      <div class="legend-color processed"></div>
      <span>å‡¦ç†æ¸ˆã¿</span>
    </div>
  </div>
</div>