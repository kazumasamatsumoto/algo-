<div class="algorithm-explorer">
  <header class="app-header">
    <h1>ğŸ” Algorithm Explorer</h1>
    <p>Angularã§å­¦ã¶ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å¯è¦–åŒ–</p>
  </header>

  <div class="main-layout">
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼: ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ é¸æŠ -->
    <aside class="sidebar">
      <div class="settings-panel">
        <h3>è¨­å®š</h3>
        
        <div class="setting-group">
          <label>é…åˆ—ã‚µã‚¤ã‚º: {{ settings.arraySize }}</label>
          <input 
            type="range" 
            min="5" 
            max="50" 
            [value]="settings.arraySize"
            (input)="updateArraySize(+($any($event.target)).value)"
            class="slider">
        </div>

        <div class="setting-group">
          <label>å®Ÿè¡Œé€Ÿåº¦: {{ settings.speed }}ms</label>
          <input 
            type="range" 
            min="50" 
            max="1000" 
            step="50"
            [value]="settings.speed"
            (input)="updateSpeed(+($any($event.target)).value)"
            class="slider">
        </div>

        <div class="setting-group">
          <label>ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—:</label>
          <select 
            [value]="settings.dataType"
            (change)="updateDataType(($any($event.target)).value)"
            class="select">
            <option value="random">ãƒ©ãƒ³ãƒ€ãƒ </option>
            <option value="sorted">ã‚½ãƒ¼ãƒˆæ¸ˆã¿</option>
            <option value="reverse">é€†é †</option>
            <option value="nearly-sorted">ã»ã¼ã‚½ãƒ¼ãƒˆæ¸ˆã¿</option>
          </select>
        </div>
      </div>

      <!-- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ é¸æŠ -->
      @for (algorithms of [sortingAlgorithms, searchAlgorithms, graphAlgorithms, dynamicProgramming, greedyAlgorithms]; track algorithms) {
        <div class="algorithm-category">
          <h3>{{ getCategoryName(algorithms) }}</h3>
          <div class="algorithm-grid">
            @for (algorithm of algorithms; track algorithm) {
              <button
                class="algorithm-btn"
                [class.selected]="selectedAlgorithm === algorithm"
                [disabled]="isRunning"
                (click)="selectAlgorithm(algorithm)">
                <div class="algorithm-name">
                  {{ getAlgorithmInfo(algorithm)?.name || algorithm }}
                </div>
                <div class="algorithm-complexity">
                  {{ getAlgorithmInfo(algorithm)?.timeComplexity || 'N/A' }}
                </div>
              </button>
            }
          </div>
        </div>
      }
    </aside>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-content">
      @if (selectedAlgorithm) {
        <div class="algorithm-header">
          <div class="algorithm-title">
            <h2>{{ getAlgorithmInfo(selectedAlgorithm)?.name || selectedAlgorithm }}</h2>
            <div class="algorithm-details">
              <div class="complexity-info">
                <span class="complexity-label">æ™‚é–“è¨ˆç®—é‡:</span>
                <span class="complexity-value">{{ getAlgorithmInfo(selectedAlgorithm)?.timeComplexity || 'N/A' }}</span>
              </div>
              <div class="complexity-info">
                <span class="complexity-label">ç©ºé–“è¨ˆç®—é‡:</span>
                <span class="complexity-value">{{ getAlgorithmInfo(selectedAlgorithm)?.spaceComplexity || 'N/A' }}</span>
              </div>
            </div>
            <p class="algorithm-description">
              {{ getAlgorithmInfo(selectedAlgorithm)?.description || 'ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®èª¬æ˜ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚' }}
            </p>
          </div>
          
          <div class="controls">
            <button 
              class="control-btn run-btn"
              [disabled]="isRunning"
              (click)="runAlgorithm()">
              â–¶ï¸ å®Ÿè¡Œ
            </button>
            <button 
              class="control-btn stop-btn"
              [disabled]="!isRunning"
              (click)="stopAlgorithm()">
              â¹ï¸ åœæ­¢
            </button>
            <button 
              class="control-btn reset-btn"
              [disabled]="isRunning"
              (click)="resetAlgorithm()">
              ğŸ”„ ãƒªã‚»ãƒƒãƒˆ
            </button>
          </div>
        </div>

        <!-- çµ±è¨ˆæƒ…å ± -->
        <div class="stats-panel">
          <div class="stat-item">
            <span class="stat-label">ã‚¹ãƒ†ãƒƒãƒ—æ•°:</span>
            <span class="stat-value">{{ stats.steps }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">æ¯”è¼ƒå›æ•°:</span>
            <span class="stat-value">{{ stats.comparisons }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">äº¤æ›å›æ•°:</span>
            <span class="stat-value">{{ stats.swaps }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">å®Ÿè¡Œæ™‚é–“:</span>
            <span class="stat-value">{{ formatTime(stats.timeMs) }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">çŠ¶æ…‹:</span>
            <span class="stat-value" [class.running]="isRunning">
              {{ isRunning ? 'å®Ÿè¡Œä¸­...' : 'åœæ­¢ä¸­' }}
            </span>
          </div>
        </div>

        <!-- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å¯è¦–åŒ–ã‚¨ãƒªã‚¢ -->
        <div class="visualization-container">
          <ng-container #algorithmContainer></ng-container>
        </div>
      } @else {
        <div class="welcome-message">
          <h2>ğŸ¯ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’é¸æŠã—ã¦ãã ã•ã„</h2>
          <p>å·¦ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’é¸æŠã—ã¦ã€å¯è¦–åŒ–ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ã€‚</p>
          <div class="feature-list">
            <div class="feature-item">
              <span class="feature-icon">ğŸ“Š</span>
              <span>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¯è¦–åŒ–</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">âš¡</span>
              <span>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªè¨­å®š</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ“ˆ</span>
              <span>è©³ç´°ãªçµ±è¨ˆæƒ…å ±</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ®</span>
              <span>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæ“ä½œ</span>
            </div>
          </div>
        </div>
      }
    </main>
  </div>
</div>